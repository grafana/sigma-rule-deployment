folders:
  conversions: ./conversions
  deployments: ./deployments
conversions:
  - name: Test Rule 1
    description: Tests that the first rule is converted correctly with it's pipelines
    outputs:
      - name: github_audit_test-1.json
        queries:
          - "{service_namespace=`cicd-o11y`} | logfmt | action=`repo.destroy`"
  - name: Test Query Splitting
    description: Tests that oversized queries are split into multiple queries
    outputs:
      - name: oversized_query_oversized-1.json
        queries:
          - "{name=`test-datasource`} | json | username=`admin0` or username=`admin1` or username=`admin2` or username=`admin3` or username=`admin4` or username=`admin5` or username=`admin6` or username=`admin7` or username=`admin8` or username=`admin9` or username=`admin10` or username=`admin11` or username=`admin12` or username=`admin13` or username=`admin14` or username=`admin15` or username=`admin16` or username=`admin17` or username=`admin18` or username=`admin19` or username=`admin20` or username=`admin21` or username=`admin22` or username=`admin23` or username=`admin24` or username=`admin25` or username=`admin26` or username=`admin27` or username=`admin28` or username=`admin29` or username=`admin30` or username=`admin31` or username=`admin32` or username=`admin33` or username=`admin34` or username=`admin35` or username=`admin36` or username=`admin37` or username=`admin38` or username=`admin39` or username=`admin40` or username=`admin41` or username=`admin42` or username=`admin43` or username=`admin44` or username=`admin45` or username=`admin46` or username=`admin47` or username=`admin48` or username=`admin49` or username=`admin50` or username=`admin51` or username=`admin52` or username=`admin53` or username=`admin54` or username=`admin55` or username=`admin56` or username=`admin57` or username=`admin58` or username=`admin59` or username=`admin60` or username=`admin61` or username=`admin62` or username=`admin63` or username=`admin64` or username=`admin65` or username=`admin66` or username=`admin67` or username=`admin68` or username=`admin69` or username=`admin70` or username=`admin71` or username=`admin72` or username=`admin73` or username=`admin74` or username=`admin75` or username=`admin76` or username=`admin77` or username=`admin78` or username=`admin79` or username=`admin80` or username=`admin81` or username=`admin82` or username=`admin83` or username=`admin84` or username=`admin85` or username=`admin86` or username=`admin87` or username=`admin88` or username=`admin89` or username=`admin90` or username=`admin91` or username=`admin92` or username=`admin93` or username=`admin94` or username=`admin95` or username=`admin96` or username=`admin97` or username=`admin98` or username=`admin99` or username=`admin100` or username=`admin101` or username=`admin102` or username=`admin103` or username=`admin104` or username=`admin105` or username=`admin106` or username=`admin107` or username=`admin108` or username=`admin109` or username=`admin110` or username=`admin111` or username=`admin112` or username=`admin113` or username=`admin114` or username=`admin115` or username=`admin116` or username=`admin117` or username=`admin118` or username=`admin119` or username=`admin120` or username=`admin121` or username=`admin122` or username=`admin123` or username=`admin124` or username=`admin125` or username=`admin126` or username=`admin127` or username=`admin128` or username=`admin129` or username=`admin130` or username=`admin131` or username=`admin132` or username=`admin133` or username=`admin134` or username=`admin135` or username=`admin136` or username=`admin137` or username=`admin138` or username=`admin139` or username=`admin140` or username=`admin141` or username=`admin142` or username=`admin143` or username=`admin144` or username=`admin145` or username=`admin146` or username=`admin147` or username=`admin148` or username=`admin149` or username=`admin150` or username=`admin151` or username=`admin152` or username=`admin153` or username=`admin154` or username=`admin155` or username=`admin156` or username=`admin157` or username=`admin158` or username=`admin159` or username=`admin160` or username=`admin161` or username=`admin162` or username=`admin163` or username=`admin164` or username=`admin165` or username=`admin166`"
          - "{name=`test-datasource`} | json | username=`admin167` or username=`admin168` or username=`admin169` or username=`admin170` or username=`admin171` or username=`admin172` or username=`admin173` or username=`admin174` or username=`admin175` or username=`admin176` or username=`admin177` or username=`admin178` or username=`admin179` or username=`admin180` or username=`admin181` or username=`admin182` or username=`admin183` or username=`admin184` or username=`admin185` or username=`admin186` or username=`admin187` or username=`admin188` or username=`admin189` or username=`admin190` or username=`admin191` or username=`admin192` or username=`admin193` or username=`admin194` or username=`admin195` or username=`admin196` or username=`admin197` or username=`admin198` or username=`admin199` or username=`admin200` or username=`admin201` or username=`admin202` or username=`admin203` or username=`admin204` or username=`admin205` or username=`admin206` or username=`admin207` or username=`admin208` or username=`admin209` or username=`admin210` or username=`admin211` or username=`admin212` or username=`admin213` or username=`admin214` or username=`admin215` or username=`admin216` or username=`admin217` or username=`admin218` or username=`admin219` or username=`admin220` or username=`admin221` or username=`admin222` or username=`admin223` or username=`admin224` or username=`admin225` or username=`admin226` or username=`admin227` or username=`admin228` or username=`admin229` or username=`admin230` or username=`admin231` or username=`admin232` or username=`admin233` or username=`admin234` or username=`admin235` or username=`admin236` or username=`admin237` or username=`admin238` or username=`admin239` or username=`admin240` or username=`admin241` or username=`admin242` or username=`admin243` or username=`admin244` or username=`admin245` or username=`admin246` or username=`admin247` or username=`admin248` or username=`admin249` or username=`admin250` or username=`admin251` or username=`admin252` or username=`admin253` or username=`admin254` or username=`admin255` or username=`admin256` or username=`admin257` or username=`admin258` or username=`admin259` or username=`admin260` or username=`admin261` or username=`admin262` or username=`admin263` or username=`admin264` or username=`admin265` or username=`admin266` or username=`admin267` or username=`admin268` or username=`admin269` or username=`admin270` or username=`admin271` or username=`admin272` or username=`admin273` or username=`admin274` or username=`admin275` or username=`admin276` or username=`admin277` or username=`admin278` or username=`admin279` or username=`admin280` or username=`admin281` or username=`admin282` or username=`admin283` or username=`admin284` or username=`admin285` or username=`admin286` or username=`admin287` or username=`admin288` or username=`admin289` or username=`admin290` or username=`admin291` or username=`admin292` or username=`admin293` or username=`admin294` or username=`admin295` or username=`admin296` or username=`admin297` or username=`admin298` or username=`admin299` or username=`admin300` or username=`admin301` or username=`admin302` or username=`admin303` or username=`admin304` or username=`admin305` or username=`admin306` or username=`admin307` or username=`admin308` or username=`admin309` or username=`admin310` or username=`admin311` or username=`admin312` or username=`admin313` or username=`admin314` or username=`admin315` or username=`admin316` or username=`admin317` or username=`admin318` or username=`admin319` or username=`admin320` or username=`admin321` or username=`admin322` or username=`admin323` or username=`admin324` or username=`admin325` or username=`admin326` or username=`admin327` or username=`admin328` or username=`admin329` or username=`admin330` or username=`admin331` or username=`admin332` or username=`admin333`"
          - "{name=`test-datasource`} | json | username=`admin334` or username=`admin335` or username=`admin336` or username=`admin337` or username=`admin338` or username=`admin339` or username=`admin340` or username=`admin341` or username=`admin342` or username=`admin343` or username=`admin344` or username=`admin345` or username=`admin346` or username=`admin347` or username=`admin348` or username=`admin349` or username=`admin350` or username=`admin351` or username=`admin352` or username=`admin353` or username=`admin354` or username=`admin355` or username=`admin356` or username=`admin357` or username=`admin358` or username=`admin359` or username=`admin360` or username=`admin361` or username=`admin362` or username=`admin363` or username=`admin364` or username=`admin365` or username=`admin366` or username=`admin367` or username=`admin368` or username=`admin369` or username=`admin370` or username=`admin371` or username=`admin372` or username=`admin373` or username=`admin374` or username=`admin375` or username=`admin376` or username=`admin377` or username=`admin378` or username=`admin379` or username=`admin380` or username=`admin381` or username=`admin382` or username=`admin383` or username=`admin384` or username=`admin385` or username=`admin386` or username=`admin387` or username=`admin388` or username=`admin389` or username=`admin390` or username=`admin391` or username=`admin392` or username=`admin393` or username=`admin394` or username=`admin395` or username=`admin396` or username=`admin397` or username=`admin398` or username=`admin399` or username=`admin400` or username=`admin401` or username=`admin402` or username=`admin403` or username=`admin404` or username=`admin405` or username=`admin406` or username=`admin407` or username=`admin408` or username=`admin409` or username=`admin410` or username=`admin411` or username=`admin412` or username=`admin413` or username=`admin414` or username=`admin415` or username=`admin416` or username=`admin417` or username=`admin418` or username=`admin419` or username=`admin420` or username=`admin421` or username=`admin422` or username=`admin423` or username=`admin424` or username=`admin425` or username=`admin426` or username=`admin427` or username=`admin428` or username=`admin429` or username=`admin430` or username=`admin431` or username=`admin432` or username=`admin433` or username=`admin434` or username=`admin435` or username=`admin436` or username=`admin437` or username=`admin438` or username=`admin439` or username=`admin440` or username=`admin441` or username=`admin442` or username=`admin443` or username=`admin444` or username=`admin445` or username=`admin446` or username=`admin447` or username=`admin448` or username=`admin449` or username=`admin450` or username=`admin451` or username=`admin452` or username=`admin453` or username=`admin454` or username=`admin455` or username=`admin456` or username=`admin457` or username=`admin458` or username=`admin459` or username=`admin460` or username=`admin461` or username=`admin462` or username=`admin463` or username=`admin464` or username=`admin465` or username=`admin466` or username=`admin467` or username=`admin468` or username=`admin469` or username=`admin470` or username=`admin471` or username=`admin472` or username=`admin473` or username=`admin474` or username=`admin475` or username=`admin476` or username=`admin477` or username=`admin478` or username=`admin479` or username=`admin480` or username=`admin481` or username=`admin482` or username=`admin483` or username=`admin484` or username=`admin485` or username=`admin486` or username=`admin487` or username=`admin488` or username=`admin489` or username=`admin490` or username=`admin491` or username=`admin492` or username=`admin493` or username=`admin494` or username=`admin495` or username=`admin496` or username=`admin497` or username=`admin498` or username=`admin499` or username=`admin500`"

integrations:
  - name: Test Integration 1
    description: Tests that the first integration is converted correctly with it's pipelines
    outputs:
      - name: github_audit_test-1
        alerting_rules:
          - refId: A0
            model:
              expr: sum(count_over_time({service_namespace=`cicd-o11y`} | logfmt | action=`repo.destroy`[$__auto]))
  - name: Test Query Splitting
    description: Tests that oversized queries are split into multiple queries
    outputs:
      - name: oversized_query_oversized-1
        alerting_rules:
          - refId: A0
            model:
              expr: "sum(count_over_time({name=`test-datasource`} | json | username=`admin0` or username=`admin1` or username=`admin2` or username=`admin3` or username=`admin4` or username=`admin5` or username=`admin6` or username=`admin7` or username=`admin8` or username=`admin9` or username=`admin10` or username=`admin11` or username=`admin12` or username=`admin13` or username=`admin14` or username=`admin15` or username=`admin16` or username=`admin17` or username=`admin18` or username=`admin19` or username=`admin20` or username=`admin21` or username=`admin22` or username=`admin23` or username=`admin24` or username=`admin25` or username=`admin26` or username=`admin27` or username=`admin28` or username=`admin29` or username=`admin30` or username=`admin31` or username=`admin32` or username=`admin33` or username=`admin34` or username=`admin35` or username=`admin36` or username=`admin37` or username=`admin38` or username=`admin39` or username=`admin40` or username=`admin41` or username=`admin42` or username=`admin43` or username=`admin44` or username=`admin45` or username=`admin46` or username=`admin47` or username=`admin48` or username=`admin49` or username=`admin50` or username=`admin51` or username=`admin52` or username=`admin53` or username=`admin54` or username=`admin55` or username=`admin56` or username=`admin57` or username=`admin58` or username=`admin59` or username=`admin60` or username=`admin61` or username=`admin62` or username=`admin63` or username=`admin64` or username=`admin65` or username=`admin66` or username=`admin67` or username=`admin68` or username=`admin69` or username=`admin70` or username=`admin71` or username=`admin72` or username=`admin73` or username=`admin74` or username=`admin75` or username=`admin76` or username=`admin77` or username=`admin78` or username=`admin79` or username=`admin80` or username=`admin81` or username=`admin82` or username=`admin83` or username=`admin84` or username=`admin85` or username=`admin86` or username=`admin87` or username=`admin88` or username=`admin89` or username=`admin90` or username=`admin91` or username=`admin92` or username=`admin93` or username=`admin94` or username=`admin95` or username=`admin96` or username=`admin97` or username=`admin98` or username=`admin99` or username=`admin100` or username=`admin101` or username=`admin102` or username=`admin103` or username=`admin104` or username=`admin105` or username=`admin106` or username=`admin107` or username=`admin108` or username=`admin109` or username=`admin110` or username=`admin111` or username=`admin112` or username=`admin113` or username=`admin114` or username=`admin115` or username=`admin116` or username=`admin117` or username=`admin118` or username=`admin119` or username=`admin120` or username=`admin121` or username=`admin122` or username=`admin123` or username=`admin124` or username=`admin125` or username=`admin126` or username=`admin127` or username=`admin128` or username=`admin129` or username=`admin130` or username=`admin131` or username=`admin132` or username=`admin133` or username=`admin134` or username=`admin135` or username=`admin136` or username=`admin137` or username=`admin138` or username=`admin139` or username=`admin140` or username=`admin141` or username=`admin142` or username=`admin143` or username=`admin144` or username=`admin145` or username=`admin146` or username=`admin147` or username=`admin148` or username=`admin149` or username=`admin150` or username=`admin151` or username=`admin152` or username=`admin153` or username=`admin154` or username=`admin155` or username=`admin156` or username=`admin157` or username=`admin158` or username=`admin159` or username=`admin160` or username=`admin161` or username=`admin162` or username=`admin163` or username=`admin164` or username=`admin165` or username=`admin166`[$__auto]))"
          - refId: A1
            model:
              expr: "sum(count_over_time({name=`test-datasource`} | json | username=`admin167` or username=`admin168` or username=`admin169` or username=`admin170` or username=`admin171` or username=`admin172` or username=`admin173` or username=`admin174` or username=`admin175` or username=`admin176` or username=`admin177` or username=`admin178` or username=`admin179` or username=`admin180` or username=`admin181` or username=`admin182` or username=`admin183` or username=`admin184` or username=`admin185` or username=`admin186` or username=`admin187` or username=`admin188` or username=`admin189` or username=`admin190` or username=`admin191` or username=`admin192` or username=`admin193` or username=`admin194` or username=`admin195` or username=`admin196` or username=`admin197` or username=`admin198` or username=`admin199` or username=`admin200` or username=`admin201` or username=`admin202` or username=`admin203` or username=`admin204` or username=`admin205` or username=`admin206` or username=`admin207` or username=`admin208` or username=`admin209` or username=`admin210` or username=`admin211` or username=`admin212` or username=`admin213` or username=`admin214` or username=`admin215` or username=`admin216` or username=`admin217` or username=`admin218` or username=`admin219` or username=`admin220` or username=`admin221` or username=`admin222` or username=`admin223` or username=`admin224` or username=`admin225` or username=`admin226` or username=`admin227` or username=`admin228` or username=`admin229` or username=`admin230` or username=`admin231` or username=`admin232` or username=`admin233` or username=`admin234` or username=`admin235` or username=`admin236` or username=`admin237` or username=`admin238` or username=`admin239` or username=`admin240` or username=`admin241` or username=`admin242` or username=`admin243` or username=`admin244` or username=`admin245` or username=`admin246` or username=`admin247` or username=`admin248` or username=`admin249` or username=`admin250` or username=`admin251` or username=`admin252` or username=`admin253` or username=`admin254` or username=`admin255` or username=`admin256` or username=`admin257` or username=`admin258` or username=`admin259` or username=`admin260` or username=`admin261` or username=`admin262` or username=`admin263` or username=`admin264` or username=`admin265` or username=`admin266` or username=`admin267` or username=`admin268` or username=`admin269` or username=`admin270` or username=`admin271` or username=`admin272` or username=`admin273` or username=`admin274` or username=`admin275` or username=`admin276` or username=`admin277` or username=`admin278` or username=`admin279` or username=`admin280` or username=`admin281` or username=`admin282` or username=`admin283` or username=`admin284` or username=`admin285` or username=`admin286` or username=`admin287` or username=`admin288` or username=`admin289` or username=`admin290` or username=`admin291` or username=`admin292` or username=`admin293` or username=`admin294` or username=`admin295` or username=`admin296` or username=`admin297` or username=`admin298` or username=`admin299` or username=`admin300` or username=`admin301` or username=`admin302` or username=`admin303` or username=`admin304` or username=`admin305` or username=`admin306` or username=`admin307` or username=`admin308` or username=`admin309` or username=`admin310` or username=`admin311` or username=`admin312` or username=`admin313` or username=`admin314` or username=`admin315` or username=`admin316` or username=`admin317` or username=`admin318` or username=`admin319` or username=`admin320` or username=`admin321` or username=`admin322` or username=`admin323` or username=`admin324` or username=`admin325` or username=`admin326` or username=`admin327` or username=`admin328` or username=`admin329` or username=`admin330` or username=`admin331` or username=`admin332` or username=`admin333`[$__auto]))"
          - refId: A2
            model:
              expr: "sum(count_over_time({name=`test-datasource`} | json | username=`admin334` or username=`admin335` or username=`admin336` or username=`admin337` or username=`admin338` or username=`admin339` or username=`admin340` or username=`admin341` or username=`admin342` or username=`admin343` or username=`admin344` or username=`admin345` or username=`admin346` or username=`admin347` or username=`admin348` or username=`admin349` or username=`admin350` or username=`admin351` or username=`admin352` or username=`admin353` or username=`admin354` or username=`admin355` or username=`admin356` or username=`admin357` or username=`admin358` or username=`admin359` or username=`admin360` or username=`admin361` or username=`admin362` or username=`admin363` or username=`admin364` or username=`admin365` or username=`admin366` or username=`admin367` or username=`admin368` or username=`admin369` or username=`admin370` or username=`admin371` or username=`admin372` or username=`admin373` or username=`admin374` or username=`admin375` or username=`admin376` or username=`admin377` or username=`admin378` or username=`admin379` or username=`admin380` or username=`admin381` or username=`admin382` or username=`admin383` or username=`admin384` or username=`admin385` or username=`admin386` or username=`admin387` or username=`admin388` or username=`admin389` or username=`admin390` or username=`admin391` or username=`admin392` or username=`admin393` or username=`admin394` or username=`admin395` or username=`admin396` or username=`admin397` or username=`admin398` or username=`admin399` or username=`admin400` or username=`admin401` or username=`admin402` or username=`admin403` or username=`admin404` or username=`admin405` or username=`admin406` or username=`admin407` or username=`admin408` or username=`admin409` or username=`admin410` or username=`admin411` or username=`admin412` or username=`admin413` or username=`admin414` or username=`admin415` or username=`admin416` or username=`admin417` or username=`admin418` or username=`admin419` or username=`admin420` or username=`admin421` or username=`admin422` or username=`admin423` or username=`admin424` or username=`admin425` or username=`admin426` or username=`admin427` or username=`admin428` or username=`admin429` or username=`admin430` or username=`admin431` or username=`admin432` or username=`admin433` or username=`admin434` or username=`admin435` or username=`admin436` or username=`admin437` or username=`admin438` or username=`admin439` or username=`admin440` or username=`admin441` or username=`admin442` or username=`admin443` or username=`admin444` or username=`admin445` or username=`admin446` or username=`admin447` or username=`admin448` or username=`admin449` or username=`admin450` or username=`admin451` or username=`admin452` or username=`admin453` or username=`admin454` or username=`admin455` or username=`admin456` or username=`admin457` or username=`admin458` or username=`admin459` or username=`admin460` or username=`admin461` or username=`admin462` or username=`admin463` or username=`admin464` or username=`admin465` or username=`admin466` or username=`admin467` or username=`admin468` or username=`admin469` or username=`admin470` or username=`admin471` or username=`admin472` or username=`admin473` or username=`admin474` or username=`admin475` or username=`admin476` or username=`admin477` or username=`admin478` or username=`admin479` or username=`admin480` or username=`admin481` or username=`admin482` or username=`admin483` or username=`admin484` or username=`admin485` or username=`admin486` or username=`admin487` or username=`admin488` or username=`admin489` or username=`admin490` or username=`admin491` or username=`admin492` or username=`admin493` or username=`admin494` or username=`admin495` or username=`admin496` or username=`admin497` or username=`admin498` or username=`admin499` or username=`admin500`[$__auto]))"
          - refId: B
            model:
              type: math
              expression: "${A0}+${A1}+${A2}"
